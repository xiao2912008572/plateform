// ğŸŒŸ è·å–å›¾ç‰‡éªŒè¯ç $(function () {    $('#captcha-img').click(function () {        // 1. å°†jsåŸç”Ÿå¯¹è±¡è½¬æ¢æˆjqueryå¯¹è±¡        var self = $(this);        // 2. è·å–imgæ ‡ç­¾ä¸Šé¢çš„srcå±æ€§ï¼Œæ‹¿åˆ°äº†src        var src = self.attr('src');        // 3. åˆ©ç”¨zlparamè®¾ç½®æ–°çš„src,é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢        // srcæ ‡ç­¾çš„å†…å®¹æ”¹å˜ï¼Œimgæ ‡ç­¾ä¼šè‡ªåŠ¨åŠ è½½ï¼ˆç­‰åŒäºåˆ·æ–°äº†é¡µé¢ï¼‰        // åå°æŸ¥è¯¢å­—ç¬¦ä¸² /catpcha/?xx=1.234123564523è¿™ç§å½¢å¼        var newsrc = zlparam.setParam(src, 'xx', Math.random());        // 4. ç»™srcè®¾ç½®å±æ€§newsrc        self.attr('src', newsrc);    });});// ğŸŒŸ è·å–çŸ­ä¿¡éªŒè¯ç $(function () {    $('#sms-captcha-btn').click(function (event) {            // 1. åœ¨è¡¨å•ä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªbuttonæŒ‰é’®ï¼Œä»–çš„é»˜è®¤è¡Œä¸ºæ˜¯ï¼š            // ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ä¹‹åï¼Œä¼šæäº¤æ‰€æœ‰çš„è¡¨å•æ•°æ®ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦é˜»æ­¢ä»–çš„é»˜è®¤è¡Œä¸º            event.preventDefault();            // å°†æŒ‰é’®å¯¹è±¡å˜æˆjqueyrå¯¹è±¡ï¼Œç°åœ¨selfå¯¹è±¡å°±ä»£è¡¨è¿™ä¸ªæŒ‰é’®            var self = $(this);            // 2. æ‹¿åˆ°æ‰‹æœºå·ç             var telephone = $('input[name="telephone"]').val();            // 3. åˆ¤æ–­æ‰‹æœºå·æ˜¯å¦å¡«å†™æ­£ç¡®            if (!(/^1[345879]\d{9}$/.test(telephone))) {                zlalert.alertInfoToast('è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ï¼');                return;            }            // è·å–æ—¶é—´æˆ³            var timestammp = (new Date).getTime();            // è·å–ç­¾å            var sign = md5(timestammp + telephone + 'qewr234234werjk;adsfkd;sfka');            zlajax.post({                // 'url': '/c/sms_captcha?telephone=' + telephone,                'url': '/c/sms_captcha/',                'data': {                    'telephone': telephone,                    'timestamp': timestammp,                    'sign': sign                },                'success': function (data) {                    // console.log(data);                    if (data['code'] == 200) {                        zlalert.alertSuccessToast('çŸ­ä¿¡éªŒè¯ç å‘é€æˆåŠŸ');                        // ç°åœ¨thisä»£è¡¨å­—å…¸å¯¹è±¡                        //this.                        // ç»™æŒ‰é’®æ·»åŠ disableå±æ€§                        self.attr("disabled", 'disabled');                        // jqueryé‡çš„å€’è®¡æ—¶,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å€’è®¡æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¯ä¸ªå¤šå°‘æ¯«ç§’æ‰§è¡Œ                        var timeCount = 60; // è®¾ç½®åˆå§‹æ—¶é—´                        // setIntervalå‡½æ•°ä¸€æ—¦æ‰§è¡Œå°±ä¼šè¿”å›è¿™ä¸ªtimerå˜é‡(å¯¹è±¡)                        // æ¸…é™¤å€’è®¡æ—¶çš„æ—¶å€™ï¼Œå°±è°ƒç”¨è¿™ä¸ªå¯¹è±¡                        var timer = setInterval(function () {                            timeCount--;                            self.text(timeCount); // è®¾ç½®è¿™ä¸ªæŒ‰é’®çš„æ–‡æœ¬å†…å®¹                            // å½“å€’è®¡æ—¶ç»“æŸæ—¶ï¼šï¼Œæ¸…é™¤disabledå±æ€§                            if (timeCount <= 0) {                                self.removeAttr('disabled');                                // åœæ­¢å€’è®¡æ—¶äº‹ä»¶                                clearInterval(timer);                                // å˜å›åŸæ¥çš„å‘é€éªŒè¯ç                                 self.text('å‘é€éªŒè¯ç ');                            }                        }, 1000)                    } else {                        zlalert.alertInfoToast(data['message']);                    }                },                'fail': function (data) {                    console.log(data);                }            });        }    )});// ğŸŒŸ æ³¨å†Œæäº¤è¡¨å•ajaxè¯·æ±‚$(function () {    $('#submit-btn').click(function () {        // 0. é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼Œå¦‚æœä¸é˜»æ­¢ï¼Œç‚¹å‡»buttonæŒ‰é’®ï¼Œä¼šè‡ªåŠ¨å°†è¡¨å•æäº¤        event.preventDefault();        // 1. è·å–è¾“å…¥æ¡†å„ç§æ ‡ç­¾        // æ‰‹æœºå·ç         var telephone_input = $("input[name='telephone']");        // çŸ­ä¿¡éªŒè¯ç         var sms_captcha_input = $("input[name='sms_captcha']");        //ç”¨æˆ·å        var username_input = $("input[name='username']");        //å¯†ç         var password1_input = $("input[name='password1']");        //ç¡®è®¤å¯†ç         var password2_input = $("input[name='password2']");        //å›¾å½¢éªŒè¯ç         var graph_captcha_input = $("input[name='graph_captcha']");        // 2. è·å–å„è¾“å…¥æ¡†çš„å€¼        var telephone = telephone_input.val();        var sms_captcha = sms_captcha_input.val();        var username = username_input.val();        var password1 = password1_input.val();        var password2 = password2_input.val();        var graph_captcha = graph_captcha_input.val();        // ajaxè¯·æ±‚        zlajax.post({            'url': '/signup/',            'data': {                'telephone': telephone,                'sms_captcha': sms_captcha,                'username': username,                'password1': password1,                'password2': password2,                'graph_captcha': graph_captcha            },            // è¯·æ±‚æˆåŠŸ200çš„æ—¶å€™            'success': function (data) {                if (data['code'] == 200) {                    // 1. è¿”å›æˆåŠŸæ³¨å†Œä¹‹åï¼Œè®°å½•æŸ¥è¯¢return_toçš„æ–‡æœ¬å†…å®¹                    var return_to = $('#return-to-span').text();                    if (return_to) {                        window.location = return_to                    } else {                        // 2. è·³è½¬åˆ°é¦–é¡µ                        window.location = '/'                    }                } else {                    zlalert.alertInfo(data['message']);                    // zlalert.alertInfo('æ³¨å†Œå¤±è´¥ï¼')                }            },            // 404 500ç­‰é”™è¯¯            'fail': function () {                zlalert.alertNetworkError();            }        })    })});